(rules_version = '2') {
	service cloud.firestore {
		match /databases/{database}/documents {
			// Users collection: only allow authenticated users to read/write their own document
			match /users/{userId} {
				allow read: if request.auth != null && request.auth.uid == userId;
				allow create: if request.auth != null && request.auth.uid == userId;
				allow update: if request.auth != null && request.auth.uid == userId;
				allow delete: if false; // disallow deletes from client
			}

			// Default deny for all other documents
			match /{document=**} {
				allow read, write: if false;
			}
		}
	}
}

